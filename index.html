<script language=javascript>document.write(unescape('%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22ja%22%3E%0A%3Chead%3E%0A%20%20%3Cmeta%20charset%3D%22UTF-8%22%3E%0A%20%20%3Ctitle%3E%u65E5%u8A18%u30A2%u30D7%u30EA%3C/title%3E%0A%20%20%3Cstyle%3E%0A%20%20%20%20body%20%7B%20font-family%3A%20sans-serif%3B%20%7D%0A%20%20%20%20input%2C%20textarea%2C%20select%20%7B%20display%3A%20block%3B%20margin%3A%204px%200%3B%20width%3A%20100%25%3B%20max-width%3A%20400px%3B%20%7D%0A%20%20%20%20%23diary-list%20li%20%7B%20cursor%3A%20pointer%3B%20margin-bottom%3A%206px%3B%20%7D%0A%20%20%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%3Ch1%3E%u65E5%u8A18%u30A2%u30D7%u30EA%3C/h1%3E%0A%0A%20%20%3C%21--%20%u30ED%u30B0%u30A4%u30F3%u30D5%u30A9%u30FC%u30E0%20--%3E%0A%20%20%3Cdiv%20id%3D%22auth-area%22%3E%0A%20%20%20%20%3Cinput%20type%3D%22email%22%20id%3D%22email%22%20placeholder%3D%22%u30E1%u30FC%u30EB%u30A2%u30C9%u30EC%u30B9%22%3E%0A%20%20%20%20%3Cinput%20type%3D%22password%22%20id%3D%22password%22%20placeholder%3D%22%u30D1%u30B9%u30EF%u30FC%u30C9%22%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22loginEmail%28%29%22%3E%u30ED%u30B0%u30A4%u30F3%3C/button%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22signupEmail%28%29%22%3E%u65B0%u898F%u767B%u9332%3C/button%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22loginWithGoogle%28%29%22%3EGoogle%u30ED%u30B0%u30A4%u30F3%3C/button%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3C%21--%20%u30ED%u30B0%u30A4%u30F3%u5F8C%u30A8%u30EA%u30A2%20--%3E%0A%20%20%3Cdiv%20id%3D%22user-area%22%20style%3D%22display%3A%20none%3B%22%3E%0A%20%20%20%20%3Cp%3E%u30ED%u30B0%u30A4%u30F3%u4E2D%3A%20%3Cspan%20id%3D%22user-email%22%3E%3C/span%3E%3C/p%3E%0A%20%20%20%20%3Cbutton%20onclick%3D%22logout%28%29%22%3E%u30ED%u30B0%u30A2%u30A6%u30C8%3C/button%3E%0A%0A%20%20%20%20%3Ch2%3E%u65B0%u3057%u3044%u65E5%u8A18%u3092%u66F8%u304F%3C/h2%3E%0A%20%20%20%20%3Cform%20id%3D%22diary-form%22%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22date%22%20id%3D%22diary-date%22%20required%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22diary-title%22%20placeholder%3D%22%u30BF%u30A4%u30C8%u30EB%22%20required%3E%0A%20%20%20%20%20%20%3Cselect%20id%3D%22diary-weather%22%3E%0A%20%20%20%20%20%20%20%20%3Coption%20value%3D%22%22%3E%u5929%u6C17%u3092%u9078%u629E%3C/option%3E%0A%20%20%20%20%20%20%20%20%3Coption%3E%u6674%u308C%3C/option%3E%3Coption%3E%u66C7%u308A%3C/option%3E%3Coption%3E%u96E8%3C/option%3E%3Coption%3E%u96EA%3C/option%3E%0A%20%20%20%20%20%20%3C/select%3E%0A%20%20%20%20%20%20%3Ctextarea%20id%3D%22diary-body%22%20placeholder%3D%22%u672C%u6587%22%20rows%3D%225%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22diary-health%22%20placeholder%3D%22%u5065%u5EB7%u72B6%u614B%uFF08%u4F8B%3A%20%u826F%u597D%u3001%u5FAE%u71B1%u3001%u982D%u75DB%u306A%u3069%uFF09%22%3E%0A%20%20%20%20%20%20%3Cbutton%20type%3D%22submit%22%3E%u4FDD%u5B58%3C/button%3E%0A%20%20%20%20%3C/form%3E%0A%0A%20%20%20%20%3Ch2%3E%u65E5%u8A18%u4E00%u89A7%3C/h2%3E%0A%20%20%20%20%3Cul%20id%3D%22diary-list%22%3E%3C/ul%3E%0A%0A%20%20%20%20%3Cdiv%20id%3D%22diary-detail%22%20style%3D%22display%3Anone%3B%22%3E%0A%20%20%20%20%20%20%3Ch3%3E%u65E5%u8A18%u8A73%u7D30%3C/h3%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22date%22%20id%3D%22detail-date%22%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22detail-title%22%3E%0A%20%20%20%20%20%20%3Cselect%20id%3D%22detail-weather%22%3E%0A%20%20%20%20%20%20%20%20%3Coption%3E%u6674%u308C%3C/option%3E%3Coption%3E%u66C7%u308A%3C/option%3E%3Coption%3E%u96E8%3C/option%3E%3Coption%3E%u96EA%3C/option%3E%0A%20%20%20%20%20%20%3C/select%3E%0A%20%20%20%20%20%20%3Ctextarea%20id%3D%22detail-body%22%20rows%3D%225%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22detail-health%22%3E%0A%20%20%20%20%20%20%3Cbutton%20onclick%3D%22updateDiary%28%29%22%3E%u66F4%u65B0%3C/button%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%0A%20%20%3C%21--%20Firebase%20SDK%20--%3E%0A%20%20%3Cscript%20type%3D%22module%22%3E%0A%20%20%20%20import%20%7B%20initializeApp%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/10.12.0/firebase-app.js%22%3B%0A%20%20%20%20import%20%7B%20getAuth%2C%20signInWithEmailAndPassword%2C%20createUserWithEmailAndPassword%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20GoogleAuthProvider%2C%20signInWithPopup%2C%20onAuthStateChanged%2C%20signOut%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/10.12.0/firebase-auth.js%22%3B%0A%20%20%20%20import%20%7B%20getFirestore%2C%20collection%2C%20addDoc%2C%20getDocs%2C%20doc%2C%20getDoc%2C%20updateDoc%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js%22%3B%0A%0A%20%20%20%20const%20firebaseConfig%20%3D%20%7B%0A%20%20%20%20%20%20apiKey%3A%20%22AIzaSyC2Yk0eE0LL2902SQGlHWaTKrTB9IZFsBQ%22%2C%0A%20%20%20%20%20%20authDomain%3A%20%22nikki-app-e8feb.firebaseapp.com%22%2C%0A%20%20%20%20%20%20projectId%3A%20%22nikki-app-e8feb%22%2C%0A%20%20%20%20%20%20storageBucket%3A%20%22nikki-app-e8feb.firebasestorage.app%22%2C%0A%20%20%20%20%20%20messagingSenderId%3A%20%22550420341822%22%2C%0A%20%20%20%20%20%20appId%3A%20%221%3A550420341822%3Aweb%3A889f9a83470f9b22c0dd6f%22%2C%0A%20%20%20%20%20%20measurementId%3A%20%22G-T66PBRW95H%22%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20app%20%3D%20initializeApp%28firebaseConfig%29%3B%0A%20%20%20%20const%20auth%20%3D%20getAuth%28app%29%3B%0A%20%20%20%20const%20db%20%3D%20getFirestore%28app%29%3B%0A%20%20%20%20const%20provider%20%3D%20new%20GoogleAuthProvider%28%29%3B%0A%0A%20%20%20%20let%20currentUser%20%3D%20null%3B%0A%20%20%20%20let%20currentDiaryId%20%3D%20null%3B%0A%0A%20%20%20%20//%20%u30ED%u30B0%u30A4%u30F3%u95A2%u4FC2%0A%20%20%20%20window.loginEmail%20%3D%20async%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20await%20signInWithEmailAndPassword%28auth%2C%20email.value%2C%20password.value%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20window.signupEmail%20%3D%20async%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20await%20createUserWithEmailAndPassword%28auth%2C%20email.value%2C%20password.value%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20window.loginWithGoogle%20%3D%20async%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20await%20signInWithPopup%28auth%2C%20provider%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20window.logout%20%3D%20%28%29%20%3D%3E%20signOut%28auth%29%3B%0A%0A%20%20%20%20//%20%u65E5%u8A18%u4FDD%u5B58%0A%20%20%20%20document.getElementById%28%22diary-form%22%29.addEventListener%28%22submit%22%2C%20async%20%28e%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20const%20diary%20%3D%20%7B%0A%20%20%20%20%20%20%20%20date%3A%20diaryDate.value%2C%0A%20%20%20%20%20%20%20%20title%3A%20diaryTitle.value%2C%0A%20%20%20%20%20%20%20%20weather%3A%20diaryWeather.value%2C%0A%20%20%20%20%20%20%20%20body%3A%20diaryBody.value%2C%0A%20%20%20%20%20%20%20%20health%3A%20diaryHealth.value%2C%0A%20%20%20%20%20%20%20%20created%3A%20new%20Date%28%29%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20await%20addDoc%28collection%28db%2C%20%22users%22%2C%20currentUser.uid%2C%20%22diaries%22%29%2C%20diary%29%3B%0A%20%20%20%20%20%20alert%28%22%u65E5%u8A18%u3092%u4FDD%u5B58%u3057%u307E%u3057%u305F%uFF01%22%29%3B%0A%20%20%20%20%20%20e.target.reset%28%29%3B%0A%20%20%20%20%20%20loadDiaries%28currentUser.uid%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20//%20%u65E5%u8A18%u4E00%u89A7%u8AAD%u307F%u8FBC%u307F%0A%20%20%20%20async%20function%20loadDiaries%28uid%29%20%7B%0A%20%20%20%20%20%20const%20list%20%3D%20document.getElementById%28%22diary-list%22%29%3B%0A%20%20%20%20%20%20list.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%20%20const%20snapshot%20%3D%20await%20getDocs%28collection%28db%2C%20%22users%22%2C%20uid%2C%20%22diaries%22%29%29%3B%0A%20%20%20%20%20%20snapshot.forEach%28docSnap%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20data%20%3D%20docSnap.data%28%29%3B%0A%20%20%20%20%20%20%20%20const%20li%20%3D%20document.createElement%28%22li%22%29%3B%0A%20%20%20%20%20%20%20%20li.textContent%20%3D%20%60%24%7Bdata.date%20%7C%7C%20%22%u65E5%u4ED8%u306A%u3057%22%7D%3A%20%24%7Bdata.title%20%7C%7C%20%22%u7121%u984C%22%7D%60%3B%0A%20%20%20%20%20%20%20%20li.onclick%20%3D%20%28%29%20%3D%3E%20showDetail%28uid%2C%20docSnap.id%29%3B%0A%20%20%20%20%20%20%20%20list.appendChild%28li%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20//%20%u65E5%u8A18%u8A73%u7D30%u3092%u8868%u793A%0A%20%20%20%20async%20function%20showDetail%28uid%2C%20id%29%20%7B%0A%20%20%20%20%20%20const%20ref%20%3D%20doc%28db%2C%20%22users%22%2C%20uid%2C%20%22diaries%22%2C%20id%29%3B%0A%20%20%20%20%20%20const%20snap%20%3D%20await%20getDoc%28ref%29%3B%0A%20%20%20%20%20%20if%20%28snap.exists%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20const%20data%20%3D%20snap.data%28%29%3B%0A%20%20%20%20%20%20%20%20currentDiaryId%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20detailDate.value%20%3D%20data.date%3B%0A%20%20%20%20%20%20%20%20detailTitle.value%20%3D%20data.title%3B%0A%20%20%20%20%20%20%20%20detailWeather.value%20%3D%20data.weather%3B%0A%20%20%20%20%20%20%20%20detailBody.value%20%3D%20data.body%3B%0A%20%20%20%20%20%20%20%20detailHealth.value%20%3D%20data.health%3B%0A%20%20%20%20%20%20%20%20document.getElementById%28%22diary-detail%22%29.style.display%20%3D%20%22block%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20//%20%u65E5%u8A18%u3092%u66F4%u65B0%0A%20%20%20%20async%20function%20updateDiary%28%29%20%7B%0A%20%20%20%20%20%20const%20ref%20%3D%20doc%28db%2C%20%22users%22%2C%20currentUser.uid%2C%20%22diaries%22%2C%20currentDiaryId%29%3B%0A%20%20%20%20%20%20await%20updateDoc%28ref%2C%20%7B%0A%20%20%20%20%20%20%20%20date%3A%20detailDate.value%2C%0A%20%20%20%20%20%20%20%20title%3A%20detailTitle.value%2C%0A%20%20%20%20%20%20%20%20weather%3A%20detailWeather.value%2C%0A%20%20%20%20%20%20%20%20body%3A%20detailBody.value%2C%0A%20%20%20%20%20%20%20%20health%3A%20detailHealth.value%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20alert%28%22%u66F4%u65B0%u3057%u307E%u3057%u305F%uFF01%22%29%3B%0A%20%20%20%20%20%20loadDiaries%28currentUser.uid%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.updateDiary%20%3D%20updateDiary%3B%0A%0A%20%20%20%20//%20%u30ED%u30B0%u30A4%u30F3%u72B6%u614B%u76E3%u8996%0A%20%20%20%20onAuthStateChanged%28auth%2C%20user%20%3D%3E%20%7B%0A%20%20%20%20%20%20currentUser%20%3D%20user%3B%0A%20%20%20%20%20%20authArea.style.display%20%3D%20user%20%3F%20%22none%22%20%3A%20%22block%22%3B%0A%20%20%20%20%20%20userArea.style.display%20%3D%20user%20%3F%20%22block%22%20%3A%20%22none%22%3B%0A%20%20%20%20%20%20userEmail.textContent%20%3D%20user%3F.email%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20if%20%28user%29%20loadDiaries%28user.uid%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A'))</script>
